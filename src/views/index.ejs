<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MinIO S3 Demo GUI</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="container">
    <h1>MinIO S3 Bucket Demo</h1>
    <h2>Bucket: <%= bucketName %></h2>

    <div class="upload-section">
      <h3>Upload a File</h3>
      <form action="/upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="file" required>
        <button type="submit">Upload</button>
      </form>
    </div>

    <div class="files-section">
      <h3>Files in Bucket</h3>
      <% if (objects.length > 0) { %>
        <table>
          <thead>
            <tr>
              <th>File Name</th>
              <th>Size (Bytes)</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
			  <% objects.forEach(object => { %>
			    <tr>
			      <td><%= object.name %></td>
			      <td><%= object.size %></td>
			      <td class="actions">
			        <a href="/download/<%= encodeURIComponent(object.name) %>" class="btn">Download</a>
			        
			        <% if (object.name.match(/\.(jpeg|jpg|gif|png|webp|svg)$/i)) { %>
			          <a href="/preview/<%= encodeURIComponent(object.name) %>" class="btn btn-preview" target="_blank">Preview</a>
			        <% } %>
			        
			        <form action="/delete" method="POST" class="delete-form">
			          <input type="hidden" name="objectName" value="<%= object.name %>">
			          <button type="submit" class="btn btn-delete">Delete</button>
			        </form>
			      </td>
			    </tr>
			  <% }); %>
			</tbody>
        </table>
      <% } else { %>
        <p>No files found in the bucket.</p>
      <% } %>
    </div>
  </div>
</body>
</html>